<!-- Enhanced Search Functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Enhanced search functionality
  const searchInput = document.querySelector('input[type="search"]');
  const searchButton = document.querySelector('button[type="submit"]');
  
  if (searchInput) {
    // Add search data attributes for better indexing
    searchInput.setAttribute('data-search-index', '/index.json');
    searchInput.setAttribute('placeholder', '인숙영, 전북대학교, SookYoung In, JBNU 검색...');
    
    // Enhanced search with better Korean support
    let searchIndex = [];
    
    // Load search index
    fetch('/index.json')
      .then(response => response.json())
      .then(data => {
        searchIndex = data;
        console.log('Search index loaded:', searchIndex.length, 'items');
      })
      .catch(error => {
        console.log('Search index not available, using fallback');
        // Fallback search data with enhanced keywords
        searchIndex = [
          {
            title: "인숙영",
            content: "전북대학교 전북대 JBNU Jeonbuk National University 컴퓨터인공지능학부 3학년 재학생 SookYoung In 프론트엔드 개발자 전주 전북특별자치도",
            permalink: "/",
            section: "home",
            tags: ["인숙영", "SookYoung In", "전북대학교", "전북대", "JBNU", "Jeonbuk National University"]
          },
          {
            title: "SookYoung In",
            content: "Jeonbuk National University JBNU 전북대학교 전북대 Computer Science Student Frontend Developer 인숙영 전주 Jeonju Jeonbuk State",
            permalink: "/en/",
            section: "home",
            tags: ["SookYoung In", "인숙영", "Jeonbuk National University", "전북대학교", "JBNU", "전북대"]
          }
        ];
      });
    
    // Custom search function
    function performSearch(query) {
      if (!query || query.length < 1) return [];
      
      const results = searchIndex.filter(item => {
        const searchText = (item.title + ' ' + item.content + ' ' + (item.tags || []).join(' ')).toLowerCase();
        const queryLower = query.toLowerCase();
        
        // Enhanced search logic for better Korean-English matching
        return searchText.includes(queryLower) || 
               // Name matching
               (searchText.includes('인숙영') && (queryLower.includes('인숙영') || queryLower.includes('sookyoung') || queryLower.includes('in'))) ||
               (searchText.includes('sookyoung') && (queryLower.includes('sookyoung') || queryLower.includes('인숙영'))) ||
               // University matching
               (searchText.includes('전북대') && (queryLower.includes('전북대') || queryLower.includes('jeonbuk') || queryLower.includes('jbnu'))) ||
               (searchText.includes('jeonbuk') && (queryLower.includes('jeonbuk') || queryLower.includes('전북대') || queryLower.includes('전북대학교'))) ||
               (searchText.includes('jbnu') && (queryLower.includes('jbnu') || queryLower.includes('전북대') || queryLower.includes('전북대학교'))) ||
               // Department matching
               (searchText.includes('컴퓨터') && (queryLower.includes('컴퓨터') || queryLower.includes('computer'))) ||
               // Location matching
               (searchText.includes('전주') && (queryLower.includes('전주') || queryLower.includes('jeonju')));
      });
      
      return results.slice(0, 10); // Limit to 10 results
    }
    
    // Override search behavior if needed
    if (searchButton) {
      searchButton.addEventListener('click', function(e) {
        const query = searchInput.value.trim();
        if (query) {
          const results = performSearch(query);
          console.log('Search results for "' + query + '":', results);
        }
      });
    }
  }
});
</script>
